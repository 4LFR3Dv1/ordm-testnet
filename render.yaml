services:
  # ServiÃ§o principal da testnet (Ãºnico serviÃ§o)
  - type: web
    name: ordm-testnet
    env: go
    region: oregon
    plan: starter
    goVersion: 1.25
    healthCheckPath: /api/v1/blockchain/info
    # FORÃ‡AR BUILD NATIVO - NÃƒO USAR DOCKER
    buildFilter:
      paths:
        - "cmd/**/*.go"
        - "pkg/**/*.go"
        - "go.mod"
        - "go.sum"
    envVars:
      - key: PORT
        value: 8081
      - key: NODE_ENV
        value: production
      - key: DATA_DIR
        value: /app/data
      - key: ORDM_NETWORK
        value: testnet
      - key: P2P_PORT
        value: 3000
      - key: BASE_URL
        value: https://ordm-testnet.onrender.com
    # COMANDOS EXPLÃCITOS PARA BUILD NATIVO
    buildCommand: |
      echo "ğŸš« DOCKER DESABILITADO - BUILD NATIVO OBRIGATÃ“RIO"
      echo "ğŸ”§ BUILD NATIVO ORDM BLOCKCHAIN"
      echo "ğŸ“‹ Ambiente:"
      go version
      echo "ğŸ“¥ DependÃªncias:"
      go mod download
      echo "ğŸ”¨ CompilaÃ§Ã£o:"
      go build -v -o ordmd ./cmd/ordmd
      echo "âœ… SUCESSO!"
      ls -la ordmd
    startCommand: |
      echo "ğŸš€ ORDM BLOCKCHAIN INICIANDO"
      echo "ğŸŒ Network: testnet"
      echo "ğŸ”Œ Port: $PORT"
      ./ordmd --mode both --rpc-port $PORT

# ConfiguraÃ§Ã£o alternativa para forÃ§ar build nativo
builds:
  - env: go
    goVersion: 1.25
    buildCommand: go build -o ordmd ./cmd/ordmd
