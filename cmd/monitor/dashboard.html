<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìä Dashboard de Monitoramento - ORDM Testnet</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 50%, #16213e 100%);
            color: #e0e0e0;
            line-height: 1.6;
        }
        .header {
            background: rgba(0,0,0,0.8);
            padding: 1rem 0;
            border-bottom: 2px solid #00d4ff;
            box-shadow: 0 4px 20px rgba(0,212,255,0.3);
        }
        .container { max-width: 1400px; margin: 0 auto; padding: 20px; }
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin: 20px 0; }
        .card {
            background: rgba(0,0,0,0.7);
            border: 1px solid #00d4ff;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(0,212,255,0.2);
        }
        .card h3 { color: #00d4ff; margin-bottom: 15px; border-bottom: 1px solid #333; padding-bottom: 10px; }
        .metric { display: flex; justify-content: space-between; margin: 10px 0; padding: 8px; background: rgba(255,255,255,0.05); border-radius: 5px; }
        .metric-value { font-weight: bold; color: #00d4ff; }
        .status { display: inline-block; padding: 5px 10px; border-radius: 5px; font-size: 12px; font-weight: bold; }
        .status.healthy { background: #00ff00; color: #000; }
        .status.warning { background: #ffaa00; color: #000; }
        .status.critical { background: #ff0000; color: #fff; }
        .chart { height: 200px; background: rgba(0,0,0,0.5); border-radius: 5px; margin: 10px 0; display: flex; align-items: center; justify-content: center; }
        .refresh-btn { 
            background: #00d4ff; color: #000; border: none; padding: 10px 20px; 
            border-radius: 5px; cursor: pointer; font-weight: bold; margin: 10px 0;
        }
        .refresh-btn:hover { background: #00b8e6; }
        .log-entry { 
            background: rgba(0,0,0,0.5); padding: 8px; margin: 5px 0; 
            border-left: 3px solid #00d4ff; border-radius: 3px; font-size: 12px;
        }
        .log-time { color: #888; font-size: 11px; }
        .log-level { font-weight: bold; }
        .log-level.INFO { color: #00d4ff; }
        .log-level.WARNING { color: #ffaa00; }
        .log-level.ERROR { color: #ff4444; }
        .log-level.CRITICAL { color: #ff0000; }
    </style>
</head>
<body>
    <div class="header">
        <div class="container">
            <h1>üìä Dashboard de Monitoramento - ORDM Testnet</h1>
            <p>Monitoramento em tempo real da infraestrutura da testnet</p>
        </div>
    </div>

    <div class="container">
        <button class="refresh-btn" onclick="refreshData()">üîÑ Atualizar Dados</button>
        
        <div class="grid">
            <div class="card">
                <h3>üìà M√©tricas de Performance</h3>
                <div class="metric">
                    <span>CPU Usage:</span>
                    <span class="metric-value" id="cpu-usage">--</span>
                </div>
                <div class="metric">
                    <span>Memory Usage:</span>
                    <span class="metric-value" id="memory-usage">--</span>
                </div>
                <div class="metric">
                    <span>Disk Usage:</span>
                    <span class="metric-value" id="disk-usage">--</span>
                </div>
                <div class="metric">
                    <span>Network I/O:</span>
                    <span class="metric-value" id="network-io">--</span>
                </div>
                <div class="metric">
                    <span>Active Connections:</span>
                    <span class="metric-value" id="connections">--</span>
                </div>
                <div class="metric">
                    <span>Request Rate:</span>
                    <span class="metric-value" id="request-rate">--</span>
                </div>
                <div class="metric">
                    <span>Error Rate:</span>
                    <span class="metric-value" id="error-rate">--</span>
                </div>
                <div class="chart">üìä Gr√°fico de Performance</div>
            </div>

            <div class="card">
                <h3>üîí Seguran√ßa</h3>
                <div class="metric">
                    <span>Total Events:</span>
                    <span class="metric-value" id="total-events">--</span>
                </div>
                <div class="metric">
                    <span>Active Alerts:</span>
                    <span class="metric-value" id="active-alerts">--</span>
                </div>
                <div class="metric">
                    <span>Blocked IPs:</span>
                    <span class="metric-value" id="blocked-ips">--</span>
                </div>
                <div class="metric">
                    <span>Rate Limit Violations:</span>
                    <span class="metric-value" id="rate-limits">--</span>
                </div>
                <div class="metric">
                    <span>System Status:</span>
                    <span class="status healthy" id="system-status">Healthy</span>
                </div>
                <div class="chart">üõ°Ô∏è Gr√°fico de Seguran√ßa</div>
            </div>

            <div class="card">
                <h3>üå± Testnet Status</h3>
                <div class="metric">
                    <span>Seed Nodes:</span>
                    <span class="metric-value" id="seed-nodes">--</span>
                </div>
                <div class="metric">
                    <span>Faucet Balance:</span>
                    <span class="metric-value" id="faucet-balance">--</span>
                </div>
                <div class="metric">
                    <span>Total Requests:</span>
                    <span class="metric-value" id="total-requests">--</span>
                </div>
                <div class="metric">
                    <span>Network Status:</span>
                    <span class="status healthy" id="network-status">Online</span>
                </div>
                <div class="chart">üåê Gr√°fico da Rede</div>
            </div>

            <div class="card">
                <h3>üìù Logs Recentes</h3>
                <div id="recent-logs">
                    <div class="log-entry">
                        <span class="log-time">Carregando...</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="card">
            <h3>üö® Alertas Ativos</h3>
            <div id="active-alerts-list">
                <div class="log-entry">
                    <span class="log-time">Carregando alertas...</span>
                </div>
            </div>
        </div>
    </div>

    <script>
        function refreshData() {
            // Atualizar m√©tricas
            fetch('/api/metrics')
                .then(response => response.json())
                .then(data => {
                    document.getElementById('cpu-usage').textContent = data.cpu_usage + '%';
                    document.getElementById('memory-usage').textContent = data.memory_usage + '%';
                    document.getElementById('disk-usage').textContent = data.disk_usage + '%';
                    document.getElementById('network-io').textContent = data.network_io + ' MB/s';
                    document.getElementById('connections').textContent = data.connections;
                    document.getElementById('request-rate').textContent = data.request_rate + ' req/s';
                    document.getElementById('error-rate').textContent = data.error_rate + '%';
                });

            // Atualizar seguran√ßa
            fetch('/api/security')
                .then(response => response.json())
                .then(data => {
                    document.getElementById('total-events').textContent = data.total_events;
                    document.getElementById('active-alerts').textContent = data.total_alerts;
                    document.getElementById('blocked-ips').textContent = data.blocked_ips;
                    document.getElementById('rate-limits').textContent = data.rate_limit_violations || 0;
                    
                    const status = document.getElementById('system-status');
                    if (data.total_alerts > 10) {
                        status.textContent = 'Critical';
                        status.className = 'status critical';
                    } else if (data.total_alerts > 5) {
                        status.textContent = 'Warning';
                        status.className = 'status warning';
                    } else {
                        status.textContent = 'Healthy';
                        status.className = 'status healthy';
                    }
                });

            // Atualizar logs
            fetch('/api/events')
                .then(response => response.json())
                .then(data => {
                    const logsContainer = document.getElementById('recent-logs');
                    logsContainer.innerHTML = '';
                    
                    data.recent_events.forEach(event => {
                        const logEntry = document.createElement('div');
                        logEntry.className = 'log-entry';
                        logEntry.innerHTML = `
                            <span class="log-time">${new Date(event.timestamp).toLocaleTimeString()}</span>
                            <span class="log-level ${event.level}">[${event.level}]</span>
                            <span>${event.message}</span>
                        `;
                        logsContainer.appendChild(logEntry);
                    });
                });

            // Atualizar alertas
            fetch('/api/alerts')
                .then(response => response.json())
                .then(data => {
                    const alertsContainer = document.getElementById('active-alerts-list');
                    alertsContainer.innerHTML = '';
                    
                    if (data.alerts.length === 0) {
                        alertsContainer.innerHTML = '<div class="log-entry">‚úÖ Nenhum alerta ativo</div>';
                    } else {
                        data.alerts.forEach(alert => {
                            const alertEntry = document.createElement('div');
                            alertEntry.className = 'log-entry';
                            alertEntry.innerHTML = `
                                <span class="log-time">${new Date(alert.timestamp).toLocaleTimeString()}</span>
                                <span class="log-level ${alert.level}">[${alert.level}]</span>
                                <span>${alert.message}</span>
                            `;
                            alertsContainer.appendChild(alertEntry);
                        });
                    }
                });
        }

        // Atualizar a cada 5 segundos
        setInterval(refreshData, 5000);
        
        // Carregar dados iniciais
        refreshData();
    </script>
</body>
</html>
